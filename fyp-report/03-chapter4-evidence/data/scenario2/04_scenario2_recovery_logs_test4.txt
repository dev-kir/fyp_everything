recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:34:53,136 - docker_controller - INFO - Scale-down successful: web-stress scaled to 2 (0.02s)
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:34:53,136 - __main__ - INFO - ✅ Scale-down successful: web-stress 3 → 2
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:37:53,159 - __main__ - INFO - Scale-down candidate: web-stress idle detected (will scale down after 180s)
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:42:53,833 - __main__ - INFO - Alert: web-stress on worker-3 - scenario1_migration - CPU=76.87% MEM=26.04%
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:42:53,833 - __main__ - INFO - Breach 1/2 for web-stress - waiting
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:42:53,833 - werkzeug - INFO - 10.0.7.63 - - [25/Dec/2025 09:42:53] "POST /alert HTTP/1.1" 200 -
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:47:18,947 - __main__ - INFO - Alert: web-stress on worker-3 - scenario1_migration - CPU=79.22% MEM=28.54%
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:47:18,947 - __main__ - INFO - Executing migration for web-stress from worker-3
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:47:18,953 - docker_controller - INFO - Zero-downtime migration: web-stress from worker-3 (replicas=1)
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:47:18,953 - docker_controller - INFO - Step 1: Finding task on worker-3
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:47:18,961 - docker_controller - INFO - Found old task 5iiryka6yq7c on worker-3
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:47:18,961 - docker_controller - INFO - Step 2: Triggering rolling update with START-FIRST order
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:47:18,961 - docker_controller - INFO - Constraints: ['node.role==worker', 'node.hostname!=master'] → ['node.role==worker', 'node.hostname!=worker-3']
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:47:18,965 - docker_controller - INFO - Step 3: Rolling update with START-FIRST initiated - new task will start before old stops
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:47:18,965 - docker_controller - INFO - Step 4: Monitoring START-FIRST rolling update (timeout 40s)
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:47:20,972 - docker_controller - INFO - Running tasks: [('5iiryka6yq7c', 'worker-3')] (old=True, new=False)
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:47:22,978 - docker_controller - INFO - Running tasks: [('5iiryka6yq7c', 'worker-3')] (old=True, new=False)
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:47:24,983 - docker_controller - INFO - Running tasks: [('5w1hh6rafpbn', 'worker-1')] (old=False, new=True)
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:47:24,983 - docker_controller - INFO - ✅ Rolling update complete: New task 5w1hh6rafpbn on worker-1
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:47:24,983 - docker_controller - WARNING - ⚠️  Did not observe both tasks running (may have had downtime)
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:47:24,987 - docker_controller - INFO - Final task distribution: {'worker-1': 1}
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:47:24,988 - docker_controller - INFO - Step 6: Cleaning up migration constraints
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:47:24,988 - docker_controller - INFO - Constraints: ['node.role==worker', 'node.hostname!=worker-3'] → ['node.role==worker']
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:47:24,988 - docker_controller - ERROR - Migration error: update() got unexpected keyword arguments 'task_template', 'version'
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:47:24,988 - __main__ - INFO - Alert processed in 6041ms
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:47:24,988 - __main__ - WARNING - Alert processing exceeded 1 second: 6041ms
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:47:24,988 - werkzeug - INFO - 10.0.7.63 - - [25/Dec/2025 09:47:24] "POST /alert HTTP/1.1" 200 -
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:48:44,938 - __main__ - INFO - Alert: web-stress on worker-1 - scenario2_scaling - CPU=96.87% MEM=43.83%
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:48:44,938 - __main__ - INFO - Breach 1/2 for web-stress - waiting
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:48:44,938 - werkzeug - INFO - 10.0.7.57 - - [25/Dec/2025 09:48:44] "POST /alert HTTP/1.1" 200 -
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:48:50,954 - __main__ - INFO - Alert: web-stress on worker-1 - scenario2_scaling - CPU=98.59% MEM=43.78%
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:48:50,954 - __main__ - INFO - Executing scale-up for web-stress
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:48:50,955 - docker_controller - INFO - Scaling web-stress from 1 to 2 replicas
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:48:50,963 - docker_controller - INFO - Scale-up successful: web-stress scaled to 2 (0.01s)
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:48:50,963 - __main__ - INFO - Alert processed in 10ms
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:48:50,963 - werkzeug - INFO - 10.0.7.57 - - [25/Dec/2025 09:48:50] "POST /alert HTTP/1.1" 200 -
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:48:56,971 - __main__ - INFO - Alert: web-stress on worker-1 - scenario2_scaling - CPU=97.87% MEM=43.63%
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:48:56,971 - __main__ - INFO - Breach 1/2 for web-stress - waiting
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:48:56,971 - werkzeug - INFO - 10.0.7.57 - - [25/Dec/2025 09:48:56] "POST /alert HTTP/1.1" 200 -
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:49:02,985 - __main__ - INFO - Alert: web-stress on worker-1 - scenario2_scaling - CPU=97.49% MEM=42.88%
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:49:02,985 - __main__ - INFO - Cooldown active for web-stress: 12s < 60s
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:49:02,986 - werkzeug - INFO - 10.0.7.57 - - [25/Dec/2025 09:49:02] "POST /alert HTTP/1.1" 200 -
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:49:09,003 - __main__ - INFO - Alert: web-stress on worker-1 - scenario2_scaling - CPU=97.09% MEM=42.42%
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:49:09,003 - __main__ - INFO - Breach 1/2 for web-stress - waiting
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:49:09,003 - werkzeug - INFO - 10.0.7.57 - - [25/Dec/2025 09:49:09] "POST /alert HTTP/1.1" 200 -
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:51:53,201 - __main__ - INFO - Scale-down triggered: web-stress idle for 840s (threshold: 180s)
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:51:53,201 - __main__ - INFO - Current: 2 replicas, CPU=60.0%, MEM=70.0%
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:51:53,201 - __main__ - INFO - After scale-down: 1 replicas can handle load (CPU<75.0%, MEM<80.0%)
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:51:53,202 - docker_controller - INFO - Scaling web-stress from 2 to 1 replicas
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:51:53,207 - docker_controller - INFO - Scale-down successful: web-stress scaled to 1 (0.01s)
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 09:51:53,207 - __main__ - INFO - ✅ Scale-down successful: web-stress 2 → 1
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:03:39,645 - __main__ - INFO - Alert: web-stress on worker-3 - scenario2_scaling - CPU=76.48% MEM=20.93%
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:03:39,645 - __main__ - INFO - Breach 1/2 for web-stress - waiting
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:03:39,646 - werkzeug - INFO - 10.0.7.63 - - [25/Dec/2025 10:03:39] "POST /alert HTTP/1.1" 200 -
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:03:49,649 - __main__ - INFO - Alert: web-stress on worker-3 - scenario1_migration - CPU=80.3% MEM=27.25%
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:03:49,650 - __main__ - INFO - Executing migration for web-stress from worker-3
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:03:49,655 - docker_controller - INFO - Zero-downtime migration: web-stress from worker-3 (replicas=1)
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:03:49,655 - docker_controller - INFO - Step 1: Finding task on worker-3
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:03:49,659 - docker_controller - INFO - Found old task 22bqyw824zu7 on worker-3
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:03:49,659 - docker_controller - INFO - Step 2: Triggering rolling update with START-FIRST order
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:03:49,659 - docker_controller - INFO - Constraints: ['node.role==worker', 'node.hostname!=master'] → ['node.role==worker', 'node.hostname!=worker-3']
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:03:49,663 - docker_controller - INFO - Step 3: Rolling update with START-FIRST initiated - new task will start before old stops
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:03:49,663 - docker_controller - INFO - Step 4: Monitoring START-FIRST rolling update (timeout 40s)
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:03:51,668 - docker_controller - INFO - Running tasks: [('22bqyw824zu7', 'worker-3')] (old=True, new=False)
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:03:53,673 - docker_controller - INFO - Running tasks: [('22bqyw824zu7', 'worker-3')] (old=True, new=False)
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:03:55,679 - docker_controller - INFO - Running tasks: [('ef8obavhudg6', 'worker-1')] (old=False, new=True)
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:03:55,679 - docker_controller - INFO - ✅ Rolling update complete: New task ef8obavhudg6 on worker-1
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:03:55,680 - docker_controller - WARNING - ⚠️  Did not observe both tasks running (may have had downtime)
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:03:55,684 - docker_controller - INFO - Final task distribution: {'worker-1': 1}
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:03:55,685 - docker_controller - INFO - Step 6: Cleaning up migration constraints
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:03:55,686 - docker_controller - INFO - Constraints: ['node.role==worker', 'node.hostname!=worker-3'] → ['node.role==worker']
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:03:55,686 - docker_controller - ERROR - Migration error: update() got unexpected keyword arguments 'task_template', 'version'
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:03:55,686 - __main__ - INFO - Alert processed in 6036ms
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:03:55,686 - __main__ - WARNING - Alert processing exceeded 1 second: 6036ms
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:03:55,686 - werkzeug - INFO - 10.0.7.63 - - [25/Dec/2025 10:03:55] "POST /alert HTTP/1.1" 200 -
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:05:13,783 - __main__ - INFO - Alert: web-stress on worker-1 - scenario2_scaling - CPU=86.19% MEM=33.12%
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:05:13,783 - __main__ - INFO - Breach 1/2 for web-stress - waiting
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:05:13,783 - werkzeug - INFO - 10.0.7.57 - - [25/Dec/2025 10:05:13] "POST /alert HTTP/1.1" 200 -
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:05:19,800 - __main__ - INFO - Alert: web-stress on worker-1 - scenario2_scaling - CPU=86.96% MEM=33.93%
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:05:19,800 - __main__ - INFO - Executing scale-up for web-stress
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:05:19,802 - docker_controller - INFO - Scaling web-stress from 1 to 2 replicas
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:05:19,809 - docker_controller - INFO - Scale-up successful: web-stress scaled to 2 (0.01s)
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:05:19,809 - __main__ - INFO - Alert processed in 9ms
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:05:19,810 - werkzeug - INFO - 10.0.7.57 - - [25/Dec/2025 10:05:19] "POST /alert HTTP/1.1" 200 -
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:05:25,816 - __main__ - INFO - Alert: web-stress on worker-1 - scenario2_scaling - CPU=83.48% MEM=30.94%
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:05:25,816 - __main__ - INFO - Breach 1/2 for web-stress - waiting
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:05:25,816 - werkzeug - INFO - 10.0.7.57 - - [25/Dec/2025 10:05:25] "POST /alert HTTP/1.1" 200 -
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:05:31,826 - __main__ - INFO - Alert: web-stress on worker-1 - scenario2_scaling - CPU=81.35% MEM=33.7%
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:05:31,826 - __main__ - INFO - Cooldown active for web-stress: 12s < 60s
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:05:31,826 - werkzeug - INFO - 10.0.7.57 - - [25/Dec/2025 10:05:31] "POST /alert HTTP/1.1" 200 -
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:05:37,844 - __main__ - INFO - Alert: web-stress on worker-1 - scenario2_scaling - CPU=78.82% MEM=33.0%
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:05:37,844 - __main__ - INFO - Breach 1/2 for web-stress - waiting
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:05:37,845 - werkzeug - INFO - 10.0.7.57 - - [25/Dec/2025 10:05:37] "POST /alert HTTP/1.1" 200 -
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:08:53,259 - __main__ - INFO - Scale-down candidate: web-stress idle detected (will scale down after 180s)
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:11:53,290 - __main__ - INFO - Scale-down triggered: web-stress idle for 180s (threshold: 180s)
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:11:53,290 - __main__ - INFO - Current: 2 replicas, CPU=60.0%, MEM=70.0%
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:11:53,291 - __main__ - INFO - After scale-down: 1 replicas can handle load (CPU<75.0%, MEM<80.0%)
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:11:53,296 - docker_controller - INFO - Scaling web-stress from 2 to 1 replicas
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:11:53,311 - docker_controller - INFO - Scale-down successful: web-stress scaled to 1 (0.02s)
recovery-manager.1.bm6mwomyxnui@master    | 2025-12-25 10:11:53,311 - __main__ - INFO - ✅ Scale-down successful: web-stress 2 → 1
